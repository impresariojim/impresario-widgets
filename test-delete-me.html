<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Swiss Super League – St. Gallen in Context</title>

  <!-- Plotly -->
  <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    * { box-sizing: border-box; }

    body {
      margin: 32px 40px;
      font-family: "Montserrat", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background-color: #FFFFFF;
      color: #1A1A1A;
    }

    .brand-line {
      font-size: 11px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: #D5C393;
      margin-bottom: 8px;
    }

    h1 {
      margin: 0 0 6px 0;
      font-size: 24px;
      font-weight: 600;
      color: #07385E;
    }

    p.subtitle {
      margin: 0 0 18px 0;
      font-size: 14px;
      color: #555555;
      max-width: 780px;
      line-height: 1.45;
    }

    hr {
      border: none;
      border-top: 1px solid rgba(0,0,0,0.15);
      margin: 20px 0;
    }

    #swiss-league-plot {
      width: 100%;
      height: 550px;
    }
  </style>
</head>

<body>
  <div class="brand-line">IMPRESARIO STRATEGIC</div>
  <h1>Swiss Super League: St. Gallen in context</h1>
  <p class="subtitle">
    Stadium capacity (horizontal) vs average sell-through (vertical). St. Gallen is highlighted in gold; all other clubs are dimmed for background context.
  </p>

  <hr>

  <div id="swiss-league-plot"></div>

  <script>
    const clubNames = [
      "BSC Young Boys","FC Basel 1893","FC St. Gallen 1879","FC Zurich",
      "FC Luzern","Servette FC","FC Sion","FC Winterthur",
      "FC Lausanne-Sport","Grasshopper Club Zurich","FC Lugano","Yverdon Sport FC"
    ];

    const capacities   = [31500,38512,20660,26104,15680,30084,14850,8700,12544,26104,4900,4200];
    const sellThrough = [90.4,67.9,87.5,58.3,77.0,33.0,66.9,92.7,55.0,26.4,79.2,65.9];

    // highlight ST. GALLEN → index 2
    const highlightIndex = 2;

    const medianCapacity = 18170;
    const medianSell     = 67.4;

    const markerColors = clubNames.map((_, i) =>
      i === highlightIndex ? "#D5C393" : "#A6B8CF"   // gold vs muted blue-grey
    );

    const markerSizes = clubNames.map((_, i) =>
      i === highlightIndex ? 26 : 14
    );

    const clubsTrace = {
      type: "scatter",
      mode: "markers+text",
      x: capacities,
      y: sellThrough,
      text: clubNames.map((name, i) => (i === highlightIndex ? name : "")),
      textposition: "top center",
      textfont: {
        family: "Montserrat, sans-serif",
        size: 13,
        color: "#1A1A1A",
        weight: 500
      },
      marker: {
        color: markerColors,
        size: markerSizes,
        line: { color: "#1A1A1A", width: 2.5 }
      },
      hovertemplate:
        "<b>%{customdata}</b><br>Capacity: %{x}<br>Sell-through: %{y:.1f}%<extra></extra>",
      customdata: clubNames
    };

    const layout = {
      margin: { l: 80, r: 40, t: 30, b: 70 },
      plot_bgcolor: "#FFFFFF",
      paper_bgcolor: "#FFFFFF",
      showlegend: false,

      xaxis: {
        title: "Stadium capacity",
        titlefont: { size: 14, family: "Montserrat, sans-serif" },
        tickfont: { size: 12 },
        gridcolor: "rgba(0,0,0,0.18)",
        gridwidth: 1,
        linecolor: "#1A1A1A",
        linewidth: 1.2,
        mirror: true,
        rangemode: "tozero"
      },
      yaxis: {
        title: "Average league sell-through (%)",
        titlefont: { size: 14, family: "Montserrat, sans-serif" },
        tickfont: { size: 12 },
        gridcolor: "rgba(0,0,0,0.18)",
        gridwidth: 1,
        linecolor: "#1A1A1A",
        linewidth: 1.2,
        mirror: true,
        range: [0, 100]
      },

      shapes: [
        {
          type: "line",
          x0: medianCapacity,
          x1: medianCapacity,
          y0: 0,
          y1: 100,
          line: { color: "rgba(0,0,0,0.25)", width: 1, dash: "dot" }
        },
        {
          type: "line",
          x0: 0,
          x1: 40000,
          y0: medianSell,
          y1: medianSell,
          line: { color: "rgba(0,0,0,0.25)", width: 1, dash: "dot" }
        }
      ],

      annotations: [
        {
          x: capacities[highlightIndex],
          y: sellThrough[highlightIndex],
          text: "<b>St. Gallen</b><br>Strong utilization at mid-size stadium",
          showarrow: true,
          arrowhead: 3,
          arrowsize: 1,
          ax: 45, ay: -15,
          font: {
            family: "Montserrat, sans-serif",
            size: 14,
            color: "#07385E",
            weight: 600
          },
          arrowcolor: "#07385E"
        }
      ]
    };

    // note: 100% dotted line trace removed
    Plotly.newPlot("swiss-league-plot", [clubsTrace], layout, { responsive: true });
  </script>
</body>
</html>
